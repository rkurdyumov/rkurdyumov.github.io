<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>TimerPIC.h</title>
</head>
<body style="background-color:#eeeeee">
<pre style="color:#000000; background-color:#eeeeee; font-size:8pt; font-family:'Courier New';"><span style="color:#0080c0; font-weight:bold">#ifndef PICTIMER_H</span>
<span style="color:#0080c0; font-weight:bold">#define PICTIMER_H</span>

<span style="color:#ff8000">/*</span>
<span style="color:#ff8000">This module contains a software PIC timer based on Timer0 overflows.  It requires the following:</span>
<span style="color:#ff8000">(1) Global interrupts enabled</span>
<span style="color:#ff8000">(2) Timer0 not used for anything else</span>
<span style="color:#ff8000">(3) Running off a 20MHz oscillator</span>
<span style="color:#ff8000">(3) Copy pasting the following into the interrupt response routine in the main C file:</span>
<span style="color:#ff8000">if (TMR0IE &amp;&amp; TMR0IF)</span>
<span style="color:#ff8000">		TimerPIC_ISR();</span>
<span style="color:#ff8000">(4) Including TimerPIC.h</span>
<span style="color:#ff8000">*/</span>

<span style="color:#0080c0">typedef</span> <span style="color:#8080c0; font-weight:bold">enum</span> <span style="color:#ff0080; font-weight:bold">{</span> TimerPIC_ERR           <span style="color:#ff0080; font-weight:bold">= -</span><span style="color:#800080; font-weight:bold">1</span><span style="color:#ff0080; font-weight:bold">,</span>
               TimerPIC_ACTIVE        <span style="color:#ff0080; font-weight:bold">=</span>  <span style="color:#800080; font-weight:bold">1</span><span style="color:#ff0080; font-weight:bold">,</span>
               TimerPIC_EXPIRED       <span style="color:#ff0080; font-weight:bold">=</span>  <span style="color:#800080; font-weight:bold">1</span><span style="color:#ff0080; font-weight:bold">,</span>
               TimerPIC_OK            <span style="color:#ff0080; font-weight:bold">=</span>  <span style="color:#800080; font-weight:bold">0</span><span style="color:#ff0080; font-weight:bold">,</span>
               TimerPIC_NOT_ACTIVE    <span style="color:#ff0080; font-weight:bold">=</span>  <span style="color:#800080; font-weight:bold">0</span><span style="color:#ff0080; font-weight:bold">,</span>
               TimerPIC_NOT_EXPIRED   <span style="color:#ff0080; font-weight:bold">=</span>  <span style="color:#800080; font-weight:bold">0</span>
<span style="color:#ff0080; font-weight:bold">}</span> TimerPICReturn_t<span style="color:#ff0080; font-weight:bold">;</span>

<span style="color:#8080c0; font-weight:bold">void</span> <span style="color:#004466">TimerPIC_Init</span><span style="color:#ff0080; font-weight:bold">(</span><span style="color:#8080c0; font-weight:bold">void</span><span style="color:#ff0080; font-weight:bold">);</span>
TimerPICReturn_t <span style="color:#004466">TimerPIC_InitTimer</span><span style="color:#ff0080; font-weight:bold">(</span><span style="color:#8080c0; font-weight:bold">unsigned char</span> Num<span style="color:#ff0080; font-weight:bold">,</span> <span style="color:#8080c0; font-weight:bold">unsigned int</span> NewTime<span style="color:#ff0080; font-weight:bold">);</span>
TimerPICReturn_t <span style="color:#004466">TimerPIC_IsTimerExpired</span><span style="color:#ff0080; font-weight:bold">(</span><span style="color:#8080c0; font-weight:bold">unsigned char</span> Num<span style="color:#ff0080; font-weight:bold">);</span>
<span style="color:#8080c0; font-weight:bold">unsigned int</span> <span style="color:#004466">TimerPIC_GetTime</span><span style="color:#ff0080; font-weight:bold">(</span><span style="color:#8080c0; font-weight:bold">void</span><span style="color:#ff0080; font-weight:bold">);</span>
<span style="color:#8080c0; font-weight:bold">void</span> <span style="color:#004466">TimerPIC_ISR</span><span style="color:#ff0080; font-weight:bold">(</span><span style="color:#8080c0; font-weight:bold">void</span><span style="color:#ff0080; font-weight:bold">);</span>

<span style="color:#0080c0; font-weight:bold">#endif</span>   <span style="color:#ff8000">/* PICTIMER_H */</span><span style="color:#0080c0; font-weight:bold"></span>
</pre>
</body>
</html>
<!--HTML generated by highlight 2.13, http://www.andre-simon.de/-->
